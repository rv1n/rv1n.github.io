<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ—Ä—Ç—Ñ–µ–ª—å –∞–∫—Ü–∏–π MOEX</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìà –ü–æ—Ä—Ç—Ñ–µ–ª—å –∞–∫—Ü–∏–π –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏</h1>
            <div class="header-controls">
                <div class="header-info-vertical">
                    <div class="last-update">
                        –°–µ–≥–æ–¥–Ω—è: <span id="today-date">-</span>
                        &nbsp;|&nbsp;
                        –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="last-update-time">-</span>
                    </div>
                    <div class="header-currency-rates" id="header-currency-rates">
                        <span id="rate-usd">USD: -</span>
                        <span id="rate-eur">EUR: -</span>
                        <span id="rate-cny">CNY: -</span>
                    </div>
                </div>
                <button id="refresh-btn" class="btn btn-refresh" onclick="manualRefresh()" title="–û–±–Ω–æ–≤–∏—Ç—å –∫–æ—Ç–∏—Ä–æ–≤–∫–∏">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∫–æ—Ç–∏—Ä–æ–≤–∫–∏
                </button>
            </div>
        </header>

        <!-- –°–≤–æ–¥–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è -->
        <div class="portfolio-summary" id="portfolio-summary">
            <div class="summary-card">
                <div class="summary-label">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</div>
                <div class="summary-value" id="total-value">0 ‚ÇΩ</div>
                <div class="summary-count" id="total-count" style="font-size: 0.9em; color: #7f8c8d; margin-top: 8px;">0 –∞–∫—Ç–∏–≤–æ–≤</div>
            </div>
                <div class="summary-card summary-card-split">
                <div class="summary-card-half">
                    <div class="summary-label">–û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫</div>
                    <div class="summary-value" id="total-pnl">0 ‚ÇΩ</div>
                    <div class="summary-percent" id="total-pnl-percent">0%</div>
                </div>
                <div class="summary-card-divider"></div>
                <div class="summary-card-half">
                    <div class="summary-label">
                        –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ <span id="summary-change-period-label">–¥–µ–Ω—å</span>
                    </div>
                    <div class="summary-value" id="total-price-change">0 ‚ÇΩ</div>
                    <div class="summary-percent" id="total-price-change-percent">0%</div>
                </div>
            </div>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è -->
        <div class="portfolio-table-container">
            <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="view-controls">
                <div class="view-switcher">
                    <button id="btn-table-view" class="view-btn active" onclick="switchView('table')">
                        üìä –ú–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å
                    </button>
                    <button id="btn-transactions-view" class="view-btn" onclick="switchView('transactions')">
                        üíº –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫/–ø—Ä–æ–¥–∞–∂
                    </button>
                    <button id="btn-chart-view" class="view-btn" onclick="switchView('chart')">
                        üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
                    </button>
                </div>
                <!-- –ö–Ω–æ–ø–∫–∞ ¬´—Å—ç–Ω–¥–≤–∏—á¬ª —Å –º–µ–Ω—é -->
                <div class="menu-wrapper">
                    <button id="menu-toggle" class="btn btn-menu" type="button" onclick="toggleMainMenu()" title="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã">
                        ‚ò∞
                    </button>
                    <div id="main-menu" class="dropdown-menu">
                        <button type="button" class="dropdown-item" onclick="switchView('history'); closeMainMenu();">
                            üìú –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω
                        </button>
                        <button type="button" class="dropdown-item" onclick="switchView('categories'); closeMainMenu();">
                            üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤–∏–¥—ã
                        </button>
                        <button type="button" class="dropdown-item" onclick="openLoggingTimeModal(); closeMainMenu();">
                            ‚è∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω
                        </button>
                        <button type="button" class="dropdown-item" onclick="switchView('server'); closeMainMenu();">
                            üñ•Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞
                        </button>
                        <button type="button" class="dropdown-item" onclick="switchView('ticker-sber'); closeMainMenu();">
                            üîç –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ SBER
                        </button>
                        <button type="button" class="dropdown-item" onclick="switchView('ticker-ru'); closeMainMenu();">
                            üîç –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ RU000A105SG2
                        </button>
                    </div>
                </div>
                <div class="cash-balance-display">
                    <span class="cash-balance-label">–°–≤–æ–±–æ–¥–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞:</span>
                    <span class="cash-balance-value" id="cash-balance">0 ‚ÇΩ</span>
                </div>
                <button id="buy-btn" class="btn btn-buy" onclick="openBuyModal()" title="–ö—É–ø–∏—Ç—å –∞–∫—Ü–∏–∏"></button>
            </div>

            <div id="loading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
            <div id="error-message" class="error-message" style="display: none;"></div>
            
            <!-- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–æ—Ä—Ç—Ñ–µ–ª—è -->
            <div id="table-view" class="portfolio-view active">
                <div class="portfolio-table-wrapper">
                <table class="portfolio-table" id="portfolio-table" style="display: none;">
                    <thead>
                        <tr>
                            <th data-sort-key="company_name" class="sortable">
                                <div class="th-label-group">
                                    <span>–ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–∞</span>
                                    <div>
                                        <select id="portfolio-type-filter" class="change-period-select" title="–§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –∞–∫—Ç–∏–≤–∞" style="margin-left: 0; margin-top: 6px;">
                                            <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                                        </select>
                                    </div>
                                </div>
                                <button type="button" class="sort-btn" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–ø–∞–Ω–∏–∏">‚áÖ</button>
                            </th>
                            <th data-sort-key="buy_price" class="sortable">
                                <div class="th-label-group">
                                    <span>–¶–µ–Ω–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è</span>
                                    <div class="th-sub-label">
                                        –∑–∞ 1 –ª–æ—Ç / –∞–∫—Ü–∏—é
                                    </div>
                                </div>
                                <button type="button" class="sort-btn" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ü–µ–Ω–µ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è">‚áÖ</button>
                            </th>
                            <th data-sort-key="quantity" class="sortable">
                                <div class="th-label-group">
                                    <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</span>
                                    <div class="th-sub-label">
                                        –ª–æ—Ç—ã / –±—É–º–∞–≥–∏
                                    </div>
                                </div>
                                <button type="button" class="sort-btn" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É">‚áÖ</button>
                            </th>
                            <th data-sort-key="invest_sum" class="sortable">
                                <div class="th-label-group">
                                    <span>–°—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π</span>
                                    <div class="th-sub-label">
                                        ‚ÇΩ
                                    </div>
                                </div>
                                <button type="button" class="sort-btn" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Å—É–º–º–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π">‚áÖ</button>
                            </th>
                            <th data-sort-key="current_value" class="sortable">
                                <div class="th-label-group">
                                    <span>–¢–µ–∫—É—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</span>
                                    <div class="th-sub-label">
                                        –ø–æ–∑–∏—Ü–∏–∏ / –∞–∫—Ç–∏–≤–∞ / –¥–æ–ª—è –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ
                                    </div>
                                </div>
                                <button type="button" class="sort-btn" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–µ–∫—É—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏">‚áÖ</button>
                            </th>
                            <th data-sort-key="profit" class="sortable">
                                <div class="th-label-group">
                                    <span>–ü—Ä–∏–±—ã–ª—å</span>
                                </div>
                                <button type="button" class="sort-btn" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø—Ä–∏–±—ã–ª–∏">‚áÖ</button>
                            </th>
                            <th data-sort-key="day_change" class="sortable">
                                <div class="th-label-group">
                                    <span>–ò–∑–º–µ–Ω–µ–Ω–∏–µ</span>
                                    <div>
                                        <select id="change-period-select" class="change-period-select" title="–ü–µ—Ä–∏–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è" style="margin-left: 0; margin-top: 6px;">
                                            <option value="1">–¥–µ–Ω—å</option>
                                            <option value="7">–Ω–µ–¥–µ–ª—è</option>
                                            <option value="30">–º–µ—Å—è—Ü</option>
                                            <option value="182">–ø–æ–ª–≥–æ–¥–∞</option>
                                            <option value="365">–≥–æ–¥</option>
                                        </select>
                                    </div>
                                </div>
                                <button type="button" class="sort-btn" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é –∑–∞ –ø–µ—Ä–∏–æ–¥">‚áÖ</button>
                            </th>
                            <th>–ì—Ä–∞—Ñ–∏–∫ (7 –¥–Ω–µ–π)</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="portfolio-tbody">
                        <!-- –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                    </tbody>
                </table>
                </div>
            </div>

            <!-- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è -->
            <div id="chart-view" class="portfolio-view" style="display: none;">
                <!-- –°–ù–ê–ß–ê–õ–ê: –î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –≤–∏–¥–∞–º –∞–∫—Ç–∏–≤–æ–≤ -->
                <div class="category-chart-container">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="margin: 0;">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è –ø–æ –≤–∏–¥–∞–º –∞–∫—Ç–∏–≤–æ–≤</h3>
                        
                        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–∏–ø–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã -->
                        <div class="chart-type-toggle">
                            <button id="asset-type-chart-toggle-pie" class="chart-toggle-btn active" onclick="switchAssetTypeChartType('pie')">
                                ü•ß –ö—Ä—É–≥–æ–≤–∞—è
                            </button>
                            <button id="asset-type-chart-toggle-bar" class="chart-toggle-btn" onclick="switchAssetTypeChartType('bar')">
                                üìä –°—Ç–æ–ª–±—á–∞—Ç–∞—è
                            </button>
                        </div>
                    </div>
                    
                    <!-- –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ -->
                    <div id="asset-type-pie-chart-container" class="categories-pie-chart-container" style="display: block;">
                        <div id="asset-type-pie-chart" class="categories-pie-chart">
                            <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>
                    
                    <!-- –°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ -->
                    <div id="asset-type-chart-container" style="display: none;">
                        <div id="asset-type-chart" class="category-chart">
                            <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- –ù–ò–ñ–ï: –î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
                <div class="category-chart-container" style="margin-top: 40px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="margin: 0;">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
                        
                        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–∏–ø–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã -->
                        <div class="chart-type-toggle">
                            <button id="chart-toggle-pie" class="chart-toggle-btn active" onclick="switchChartType('pie')">
                                ü•ß –ö—Ä—É–≥–æ–≤–∞—è
                            </button>
                            <button id="chart-toggle-bar" class="chart-toggle-btn" onclick="switchChartType('bar')">
                                üìä –°—Ç–æ–ª–±—á–∞—Ç–∞—è
                            </button>
                        </div>
                    </div>
                    
                    <!-- –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ -->
                    <div id="distribution-pie-chart-container" class="categories-pie-chart-container" style="display: block;">
                        <div id="distribution-pie-chart" class="categories-pie-chart">
                            <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>
                    
                    <!-- –°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ -->
                    <div id="category-chart-container" style="display: none;">
                        <div id="category-chart" class="category-chart">
                            <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω -->
            <div id="history-view" class="portfolio-view" style="display: none;">
                <div class="price-history-container">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω</h3>
                    <div class="history-controls">
                        <select id="history-ticker-filter" class="history-filter">
                            <option value="">–í—Å–µ —Ç–∏–∫–µ—Ä—ã</option>
                            <!-- –û–ø—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                        </select>
                        <input type="date" id="history-date-from" class="history-filter" placeholder="–î–∞—Ç–∞ –æ—Ç">
                        <input type="date" id="history-date-to" class="history-filter" placeholder="–î–∞—Ç–∞ –¥–æ">
                        <button id="history-reset-filters" class="btn btn-secondary">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                        <button id="manual-log-btn" class="btn btn-secondary">üìù –ó–∞–ø–∏—Å–∞—Ç—å —Ü–µ–Ω—ã —Å–µ–π—á–∞—Å</button>
                    </div>
                    <div id="price-history-content" class="price-history-content">
                        <!-- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
            </div>

            <!-- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞ -->
            <div id="server-view" class="portfolio-view" style="display: none;">
                <div class="server-status-container">
                    <h3>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞</h3>
                    <div id="server-status-content" class="server-status-content">
                        –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ —Å–µ—Ä–≤–µ—Ä–µ...
                    </div>
                </div>
            </div>

            <!-- –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç–∏–∫–µ—Ä—É SBER -->
            <div id="ticker-sber-view" class="portfolio-view" style="display: none;">
                <div class="server-status-container">
                    <h3>–ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç–∏–∫–µ—Ä—É SBER</h3>
                    <p style="margin-top: 8px; color: #7f8c8d; font-size: 0.9em;">
                        –ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ —Ç–∏–∫–µ—Ä—É SBER –∏–∑ MOEX API –∏ –±–∞–∑—ã.
                    </p>
                    <div id="ticker-sber-content" class="server-status-content">
                        –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ SBER...
                    </div>
                </div>
            </div>

            <!-- –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç–∏–∫–µ—Ä—É RU000A105SG2 -->
            <div id="ticker-ru-view" class="portfolio-view" style="display: none;">
                <div class="server-status-container">
                    <h3>–ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç–∏–∫–µ—Ä—É RU000A105SG2</h3>
                    <p style="margin-top: 8px; color: #7f8c8d; font-size: 0.9em;">
                        –ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ —Ç–∏–∫–µ—Ä—É RU000A105SG2 –∏–∑ MOEX API –∏ –±–∞–∑—ã.
                    </p>
                    <div id="ticker-ru-content" class="server-status-content">
                        –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ RU000A105SG2...
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
            <div id="categories-view" class="portfolio-view" style="display: none;">
                <div class="categories-container">
                    <div class="categories-header">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –≤–∏–¥–∞–º–∏</h3>
                                <p class="categories-description">–ù–∞–∑–Ω–∞—á—å—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ –≤–∏–¥ –∞–∫—Ç–∏–≤–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–∫–µ—Ä–∞ –≤ –≤–∞—à–µ–º –ø–æ—Ä—Ç—Ñ–µ–ª–µ</p>
                            </div>
                            <button id="manage-categories-btn" class="btn btn-secondary" style="margin-left: 20px;">
                                ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –≤–∏–¥–∞–º–∏
                            </button>
                        </div>
                    </div>
                    
                    <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
                    <div class="categories-content">
                        <table class="categories-table" id="categories-table">
                            <thead>
                                <tr>
                                    <th>–¢–∏–∫–µ—Ä</th>
                                    <th>–ö–æ–º–ø–∞–Ω–∏—è</th>
                                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                    <th>–í–∏–¥ –∞–∫—Ç–∏–≤–∞</th>
                                </tr>
                            </thead>
                            <tbody id="categories-tbody">
                                <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                            </tbody>
                        </table>
                        <div id="no-categories" class="no-data-message" style="display: none;">
                            <p>üìÅ –í –ø–æ—Ä—Ç—Ñ–µ–ª–µ –ø–æ–∫–∞ –Ω–µ—Ç —Ç–∏–∫–µ—Ä–æ–≤</p>
                            <p>–î–æ–±–∞–≤—å—Ç–µ –∞–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
            <div id="transactions-view" class="portfolio-view" style="display: none;">
                <div class="transactions-container">
                    <div class="transactions-header">
                        <h3>–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫/–ø—Ä–æ–¥–∞–∂</h3>
                    </div>
                    
                    <!-- –§–∏–ª—å—Ç—Ä—ã -->
                    <div class="transactions-filters">
                        <select id="trans-ticker-filter" class="trans-filter">
                            <option value="">–í—Å–µ —Ç–∏–∫–µ—Ä—ã</option>
                            <!-- –û–ø—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                        </select>
                        <select id="trans-type-filter" class="trans-filter">
                            <option value="">–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</option>
                            <option value="–ü–æ–∫—É–ø–∫–∞">–ü–æ–∫—É–ø–∫–∞</option>
                            <option value="–ü—Ä–æ–¥–∞–∂–∞">–ü—Ä–æ–¥–∞–∂–∞</option>
                        </select>
                        <input type="date" id="trans-date-from" class="trans-filter" placeholder="–î–∞—Ç–∞ –æ—Ç">
                        <input type="date" id="trans-date-to" class="trans-filter" placeholder="–î–∞—Ç–∞ –¥–æ">
                        <button id="trans-reset-filters" class="btn btn-secondary">üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                    </div>
                    
                    <!-- –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
                    <div id="transactions-content" class="transactions-content">
                        <table class="transactions-table" id="transactions-table">
                            <thead>
                                <tr>
                                    <th>–î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏</th>
                                    <th>–¢–∏–∫–µ—Ä</th>
                                    <th>–ö–æ–º–ø–∞–Ω–∏—è</th>
                                    <th>–í–∏–¥ –æ–ø–µ—Ä–∞—Ü–∏–∏</th>
                                    <th>–¶–µ–Ω–∞</th>
                                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                    <th>–°—É–º–º–∞</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="transactions-tbody">
                                <!-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                            </tbody>
                        </table>
                        <div id="no-transactions" class="no-data-message" style="display: none;">
                            <p>üìù –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø—É—Å—Ç–∞</p>
                            <p>–ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="edit-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é</h2>
            <form id="edit-form">
                <input type="hidden" id="edit-id">
                <div class="form-group">
                    <label for="edit-company_name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</label>
                    <input type="text" id="edit-company_name" name="company_name">
                </div>
                <div class="form-group">
                    <label for="edit-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select id="edit-category" name="category">
                        <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</option>
                        <option value="–ù–µ—Ñ—Ç—å –∏ –≥–∞–∑">–ù–µ—Ñ—Ç—å –∏ –≥–∞–∑</option>
                        <option value="–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞">–≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞</option>
                        <option value="–¢–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏">–¢–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏</option>
                        <option value="–ú–µ—Ç–∞–ª–ª—ã –∏ –¥–æ–±—ã—á–∞">–ú–µ—Ç–∞–ª–ª—ã –∏ –¥–æ–±—ã—á–∞</option>
                        <option value="–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Å–µ–∫—Ç–æ—Ä">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Å–µ–∫—Ç–æ—Ä</option>
                        <option value="–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–π —Å–µ–∫—Ç–æ—Ä">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–π —Å–µ–∫—Ç–æ—Ä</option>
                        <option value="–•–∏–º–∏—è –∏ –Ω–µ—Ñ—Ç–µ—Ö–∏–º–∏—è">–•–∏–º–∏—è –∏ –Ω–µ—Ñ—Ç–µ—Ö–∏–º–∏—è</option>
                        <option value="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (IT)">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (IT)</option>
                        <option value="–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å">–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</option>
                        <option value="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ *</label>
                    <input type="number" id="edit-quantity" name="quantity" required min="0.01" step="0.01">
                </div>
                <div class="form-group">
                    <label for="edit-average_buy_price">–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ *</label>
                    <input type="number" id="edit-average_buy_price" name="average_buy_price" required min="0.00001" step="0.00001">
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
    <div id="add-transaction-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeAddTransactionModal()">&times;</span>
            <h2>–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</h2>
            <form id="add-transaction-form">
                <div class="form-group">
                    <label for="trans-add-date">–î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ *</label>
                    <input type="datetime-local" id="trans-add-date" name="date" required>
                </div>
                <div class="form-group">
                    <label for="trans-add-instrument-type">–¢–∏–ø –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ *</label>
                    <select id="trans-add-instrument-type" name="instrument_type" required>
                        <option value="STOCK">–ê–∫—Ü–∏—è</option>
                        <option value="BOND">–û–±–ª–∏–≥–∞—Ü–∏—è</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="trans-add-ticker">–¢–∏–∫–µ—Ä *</label>
                    <input type="text" id="trans-add-ticker" name="ticker" required>
                </div>
                <div class="form-group">
                    <label for="trans-add-company">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</label>
                    <input type="text" id="trans-add-company" name="company_name">
                </div>
                <div class="form-group">
                    <label for="trans-add-type">–í–∏–¥ –æ–ø–µ—Ä–∞—Ü–∏–∏ *</label>
                    <select id="trans-add-type" name="operation_type" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é</option>
                        <option value="–ü–æ–∫—É–ø–∫–∞">–ü–æ–∫—É–ø–∫–∞</option>
                        <option value="–ü—Ä–æ–¥–∞–∂–∞">–ü—Ä–æ–¥–∞–∂–∞</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="trans-add-price">–¶–µ–Ω–∞ *</label>
                    <input type="number" id="trans-add-price" name="price" required min="0.00001" step="0.00001">
                </div>
                <div class="form-group">
                    <label for="trans-add-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ *</label>
                    <input type="number" id="trans-add-quantity" name="quantity" required min="0.01" step="0.01">
                </div>
                <div class="form-group">
                    <label for="trans-add-total">–°—É–º–º–∞</label>
                    <input type="number" id="trans-add-total" name="total" readonly>
                </div>
                <div class="form-group">
                    <label for="trans-add-notes">–ó–∞–º–µ—Ç–∫–∏</label>
                    <textarea id="trans-add-notes" name="notes" rows="3"></textarea>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeAddTransactionModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
    <div id="edit-transaction-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeEditTransactionModal()">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</h2>
            <form id="edit-transaction-form">
                <input type="hidden" id="trans-edit-id">
                <div class="form-group">
                    <label for="trans-edit-date">–î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ *</label>
                    <input type="datetime-local" id="trans-edit-date" name="date" required>
                </div>
                <div class="form-group">
                    <label for="trans-edit-ticker">–¢–∏–∫–µ—Ä *</label>
                    <input type="text" id="trans-edit-ticker" name="ticker" required>
                </div>
                <div class="form-group">
                    <label for="trans-edit-company">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</label>
                    <input type="text" id="trans-edit-company" name="company_name">
                </div>
                <div class="form-group">
                    <label for="trans-edit-type">–í–∏–¥ –æ–ø–µ—Ä–∞—Ü–∏–∏ *</label>
                    <select id="trans-edit-type" name="operation_type" required>
                        <option value="–ü–æ–∫—É–ø–∫–∞">–ü–æ–∫—É–ø–∫–∞</option>
                        <option value="–ü—Ä–æ–¥–∞–∂–∞">–ü—Ä–æ–¥–∞–∂–∞</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="trans-edit-price">–¶–µ–Ω–∞ *</label>
                    <input type="number" id="trans-edit-price" name="price" required min="0.00001" step="0.00001">
                </div>
                <div class="form-group">
                    <label for="trans-edit-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ *</label>
                    <input type="number" id="trans-edit-quantity" name="quantity" required min="0.01" step="0.01">
                </div>
                <div class="form-group">
                    <label for="trans-edit-total">–°—É–º–º–∞</label>
                    <input type="number" id="trans-edit-total" name="total" readonly>
                </div>
                <div class="form-group">
                    <label for="trans-edit-notes">–ó–∞–º–µ—Ç–∫–∏</label>
                    <textarea id="trans-edit-notes" name="notes" rows="3"></textarea>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditTransactionModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ -->
    <div id="buy-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeBuyModal()">&times;</span>
            <h2>‚ûï –ö—É–ø–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</h2>
            <form id="buy-form">
                <div class="form-group">
                    <label for="buy-ticker">–¢–∏–∫–µ—Ä *</label>
                    <div class="ticker-input-container">
                        <input type="text" id="buy-ticker" name="ticker" required maxlength="20">
                        <span id="buy-ticker-status" class="ticker-status"></span>
                    </div>
                    <small id="buy-ticker-hint" class="ticker-hint"></small>
                </div>
                <div class="form-group">
                    <label for="buy-company-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</label>
                    <input type="text" id="buy-company-name" name="company_name" readonly style="background: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label for="buy-date">–î–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏ *</label>
                    <input type="date" id="buy-date" name="date" required>
                </div>
                <div class="form-group">
                    <label for="buy-lots">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ—Ç–æ–≤ *</label>
                    <input type="number" id="buy-lots" name="lots" required min="1" step="1">
                    <small id="buy-lots-hint" style="display: none; color: #7f8c8d; margin-top: 5px;"></small>
                </div>
                <input type="hidden" id="buy-lotsize" value="1">
                <div class="form-group">
                    <label for="buy-price">–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ *</label>
                    <input type="number" id="buy-price" name="price" required min="0.00001" step="0.00001">
                </div>
                <div class="form-group">
                    <label for="buy-total">–°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏</label>
                    <input type="number" id="buy-total" readonly style="background: #f5f5f5;">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">–ö—É–ø–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeBuyModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ -->
    <div id="sell-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeSellModal()">&times;</span>
            <h2>‚ûñ –ü—Ä–æ–¥–∞—Ç—å –∞–∫—Ü–∏–∏</h2>
            <form id="sell-form">
                <input type="hidden" id="sell-portfolio-id">
                <input type="hidden" id="sell-ticker">
                <input type="hidden" id="sell-company-name">
                <div class="form-group">
                    <label>–¢–∏–∫–µ—Ä</label>
                    <input type="text" id="sell-ticker-display" readonly style="background: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label>–ö–æ–º–ø–∞–Ω–∏—è</label>
                    <input type="text" id="sell-company-display" readonly style="background: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label>–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏</label>
                    <input type="text" id="sell-available-display" readonly style="background: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label for="sell-lots">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ *</label>
                    <!-- –†–∞–∑—Ä–µ—à–∞–µ–º –¥—Ä–æ–±–Ω—ã–µ –ª–æ—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.01) –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –æ—Å—Ç–∞—Ç–∫–æ–≤ -->
                    <input type="number" id="sell-lots" name="lots" required min="0.01" step="0.01" placeholder="0">
                    <small id="sell-lots-hint" style="display: none; color: #7f8c8d; margin-top: 5px;"></small>
                </div>
                <input type="hidden" id="sell-lotsize" value="1">
                <input type="hidden" id="sell-available-quantity" value="0">
                <div class="form-group">
                    <label for="sell-price">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ *</label>
                    <input type="number" id="sell-price" name="price" required min="0.00001" step="0.00001" placeholder="0.00000">
                </div>
                <div class="form-group">
                    <label for="sell-total">–°—É–º–º–∞ –ø—Ä–æ–¥–∞–∂–∏</label>
                    <input type="number" id="sell-total" readonly style="background: #f5f5f5;" placeholder="–†–∞—Å—Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">–ü—Ä–æ–¥–∞—Ç—å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeSellModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
    <div id="manage-categories-modal" class="modal" style="display: none;">
        <div class="modal-content manage-categories-content" style="max-width: 800px;">
            <span class="close" onclick="closeManageCategoriesModal()">&times;</span>
            <h2>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –≤–∏–¥–∞–º–∏</h2>
            
            <!-- –í–∫–ª–∞–¥–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –≤–∏–¥–∞–º–∏ -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #ecf0f1;">
                <button id="tab-categories" class="tab-button active" onclick="switchManageTab('categories')" style="padding: 10px 20px; border: none; background: none; cursor: pointer; border-bottom: 2px solid #667eea; margin-bottom: -2px;">
                    –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
                </button>
                <button id="tab-asset-types" class="tab-button" onclick="switchManageTab('asset-types')" style="padding: 10px 20px; border: none; background: none; cursor: pointer; border-bottom: 2px solid transparent; margin-bottom: -2px;">
                    –í–∏–¥—ã –∞–∫—Ç–∏–≤–æ–≤
                </button>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
            <div id="categories-tab-content">
                <div style="margin-bottom: 20px;">
                    <button id="add-category-btn" class="btn btn-primary" style="width: 100%; margin-bottom: 15px;" title="–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é">
                        ‚ûï
                    </button>
                </div>
                <div id="categories-list-container">
                    <table class="categories-table" style="width: 100%;">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="manage-categories-tbody">
                            <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                        </tbody>
                    </table>
                    <div id="no-categories-manage" class="no-data-message" style="display: none;">
                        <p>üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                        <p>–ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</p>
                    </div>
                </div>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∏–¥–æ–≤ –∞–∫—Ç–∏–≤–æ–≤ -->
            <div id="asset-types-tab-content" style="display: none;">
                <div style="margin-bottom: 20px;">
                    <button id="add-asset-type-btn" class="btn btn-primary" style="width: 100%; margin-bottom: 15px;" title="–î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥ –∞–∫—Ç–∏–≤–∞">
                        ‚ûï
                    </button>
                </div>
                <div id="asset-types-list-container">
                    <table class="categories-table" style="width: 100%;">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="manage-asset-types-tbody">
                            <!-- –í–∏–¥—ã –∞–∫—Ç–∏–≤–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                        </tbody>
                    </table>
                    <div id="no-asset-types-manage" class="no-data-message" style="display: none;">
                        <p>üìÅ –í–∏–¥—ã –∞–∫—Ç–∏–≤–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                        <p>–ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥ –∞–∫—Ç–∏–≤–∞" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –≤–∏–¥–∞</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <div id="category-edit-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <span class="close" onclick="closeCategoryEditModal()">&times;</span>
            <h2 id="category-edit-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            <form id="category-edit-form">
                <input type="hidden" id="category-edit-id">
                <div class="form-group">
                    <label for="category-edit-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ *</label>
                    <input type="text" id="category-edit-name" name="name" required maxlength="100">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeCategoryEditModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏–¥–∞ –∞–∫—Ç–∏–≤–∞ -->
    <div id="asset-type-edit-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <span class="close" onclick="closeAssetTypeEditModal()">&times;</span>
            <h2 id="asset-type-edit-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥ –∞–∫—Ç–∏–≤–∞</h2>
            <form id="asset-type-edit-form">
                <input type="hidden" id="asset-type-edit-id">
                <div class="form-group">
                    <label for="asset-type-edit-name">–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–∞ –∞–∫—Ç–∏–≤–∞ *</label>
                    <input type="text" id="asset-type-edit-name" name="name" required maxlength="100">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeAssetTypeEditModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–∏–∫–µ—Ä–µ -->
    <div id="ticker-info-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <span class="close" onclick="closeTickerInfoModal()">&times;</span>
            <h2 id="ticker-info-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∏–∫–µ—Ä–µ</h2>
            <div id="ticker-info-content" style="margin-top: 20px;">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω -->
    <div id="logging-time-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" onclick="closeLoggingTimeModal()">&times;</span>
            <h2>‚è∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω</h2>
            <div style="margin-top: 20px;">
                <p style="margin-bottom: 15px; color: #7f8c8d;">
                    –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Ü–µ–Ω—ã –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–æ–≤ –∏–∑ –≤–∞—à–µ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è.
                </p>
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                    <label for="logging-hour" style="font-weight: bold;">–ß–∞—Å (0-23):</label>
                    <input type="number" id="logging-hour" min="0" max="23" value="0" 
                           style="width: 80px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <label for="logging-minute" style="font-weight: bold;">–ú–∏–Ω—É—Ç–∞ (0-59):</label>
                    <input type="number" id="logging-minute" min="0" max="59" value="0" 
                           style="width: 80px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                </div>
                <div style="margin-bottom: 20px; padding: 10px; background-color: #ecf0f1; border-radius: 4px;">
                    <strong>–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:</strong> <span id="current-logging-time">-</span>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button class="btn btn-secondary" onclick="closeLoggingTimeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="saveLoggingTime()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
